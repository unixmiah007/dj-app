{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"http://localhost:5000\";// adjust if needed\nconst daysOfWeek=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"];function Calendar(){const[date,setDate]=useState(new Date());const[selectedDate,setSelectedDate]=useState(null);const[bookedDates,setBookedDates]=useState([]);const year=date.getFullYear();const month=date.getMonth();const firstDay=new Date(year,month,1).getDay();const daysInMonth=new Date(year,month+1,0).getDate();const calendarDays=[];for(let i=0;i<firstDay;i++)calendarDays.push(null);for(let d=1;d<=daysInMonth;d++)calendarDays.push(d);const handlePrevMonth=()=>setDate(new Date(year,month-1));const handleNextMonth=()=>setDate(new Date(year,month+1));const fetchBookings=async()=>{try{const res=await axios.get(`${API_URL}/bookings`);// Normalize to YYYY-MM-DD\nconst booked=res.data.map(b=>new Date(b.date).toISOString().split(\"T\")[0]);setBookedDates(booked);}catch(err){console.error(\"Failed to fetch bookings:\",err);}};useEffect(()=>{fetchBookings();},[date]);const formatDate=day=>new Date(year,month,day).toISOString().split(\"T\")[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto p-6 bg-white shadow rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevMonth,className:\"text-indigo-600 font-bold\",children:\"< Prev\"}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-700\",children:[date.toLocaleString(\"default\",{month:\"long\"}),\" \",year]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextMonth,className:\"text-indigo-600 font-bold\",children:\"Next >\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-1 text-center mb-2\",children:daysOfWeek.map(day=>/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-600\",children:day},day))}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-1\",children:calendarDays.map((day,idx)=>{const today=new Date();const isToday=day===today.getDate()&&month===today.getMonth()&&year===today.getFullYear();const thisDateStr=day?formatDate(day):\"\";const isBooked=bookedDates.includes(thisDateStr);const isSelected=selectedDate===thisDateStr;return/*#__PURE__*/_jsx(\"button\",{disabled:!day,onClick:()=>setSelectedDate(thisDateStr),className:`h-10 rounded ${!day?\"\":\"hover:bg-indigo-100\"} ${isToday?\"border border-indigo-400\":\"\"} ${isBooked?\"bg-red-300 text-white\":\"\"} ${isSelected?\"bg-indigo-600 text-white\":\"\"}\n                ${!day?\"cursor-default\":\"cursor-pointer\"}\n              `,title:isBooked?\"Already Booked\":\"Available\",children:day||\"\"},idx);})}),selectedDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-indigo-50 rounded text-indigo-700\",children:[\"Selected: \",/*#__PURE__*/_jsx(\"strong\",{children:selectedDate}),bookedDates.includes(selectedDate)?/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 font-semibold\",children:\"Already booked\"}):/*#__PURE__*/_jsxs(\"form\",{className:\"mt-2 flex flex-col gap-2\",onSubmit:async e=>{e.preventDefault();const name=e.target.name.value;try{await axios.post(`${API_URL}/booking`,{name,date:selectedDate});alert(\"Booking confirmed!\");fetchBookings();}catch(err){alert(\"Failed to book.\");}},children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",required:true,placeholder:\"Your Name\",className:\"border rounded px-2 py-1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700\",children:\"Book Date\"})]})]})]});}export default Calendar;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","API_URL","daysOfWeek","Calendar","date","setDate","Date","selectedDate","setSelectedDate","bookedDates","setBookedDates","year","getFullYear","month","getMonth","firstDay","getDay","daysInMonth","getDate","calendarDays","i","push","d","handlePrevMonth","handleNextMonth","fetchBookings","res","get","booked","data","map","b","toISOString","split","err","console","error","formatDate","day","className","children","onClick","toLocaleString","idx","today","isToday","thisDateStr","isBooked","includes","isSelected","disabled","title","onSubmit","e","preventDefault","name","target","value","post","alert","required","placeholder","type"],"sources":["/home/unixmiah/dj-app/frontend/src/pages/Calendar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst API_URL = \"http://localhost:5000\"; // adjust if needed\nconst daysOfWeek = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n\nfunction Calendar() {\n  const [date, setDate] = useState(new Date());\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [bookedDates, setBookedDates] = useState([]);\n\n  const year = date.getFullYear();\n  const month = date.getMonth();\n\n  const firstDay = new Date(year, month, 1).getDay();\n  const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n  const calendarDays = [];\n  for (let i = 0; i < firstDay; i++) calendarDays.push(null);\n  for (let d = 1; d <= daysInMonth; d++) calendarDays.push(d);\n\n  const handlePrevMonth = () => setDate(new Date(year, month - 1));\n  const handleNextMonth = () => setDate(new Date(year, month + 1));\n\n  const fetchBookings = async () => {\n    try {\n      const res = await axios.get(`${API_URL}/bookings`);\n      // Normalize to YYYY-MM-DD\n      const booked = res.data.map((b) =>\n        new Date(b.date).toISOString().split(\"T\")[0]\n      );\n      setBookedDates(booked);\n    } catch (err) {\n      console.error(\"Failed to fetch bookings:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchBookings();\n  }, [date]);\n\n  const formatDate = (day) =>\n    new Date(year, month, day).toISOString().split(\"T\")[0];\n\n  return (\n    <div className=\"max-w-md mx-auto p-6 bg-white shadow rounded\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <button onClick={handlePrevMonth} className=\"text-indigo-600 font-bold\">\n          &lt; Prev\n        </button>\n        <h2 className=\"text-xl font-semibold text-gray-700\">\n          {date.toLocaleString(\"default\", { month: \"long\" })} {year}\n        </h2>\n        <button onClick={handleNextMonth} className=\"text-indigo-600 font-bold\">\n          Next &gt;\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-7 gap-1 text-center mb-2\">\n        {daysOfWeek.map((day) => (\n          <div key={day} className=\"font-medium text-gray-600\">\n            {day}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"grid grid-cols-7 gap-1\">\n        {calendarDays.map((day, idx) => {\n          const today = new Date();\n          const isToday =\n            day === today.getDate() &&\n            month === today.getMonth() &&\n            year === today.getFullYear();\n\n          const thisDateStr = day ? formatDate(day) : \"\";\n          const isBooked = bookedDates.includes(thisDateStr);\n          const isSelected = selectedDate === thisDateStr;\n\n          return (\n            <button\n              key={idx}\n              disabled={!day}\n              onClick={() => setSelectedDate(thisDateStr)}\n              className={`h-10 rounded ${\n                !day ? \"\" : \"hover:bg-indigo-100\"\n              } ${isToday ? \"border border-indigo-400\" : \"\"} ${\n                isBooked ? \"bg-red-300 text-white\" : \"\"\n              } ${isSelected ? \"bg-indigo-600 text-white\" : \"\"}\n                ${!day ? \"cursor-default\" : \"cursor-pointer\"}\n              `}\n              title={isBooked ? \"Already Booked\" : \"Available\"}\n            >\n              {day || \"\"}\n            </button>\n          );\n        })}\n      </div>\n\n      {selectedDate && (\n        <div className=\"mt-4 p-4 bg-indigo-50 rounded text-indigo-700\">\n          Selected: <strong>{selectedDate}</strong>\n          {bookedDates.includes(selectedDate) ? (\n            <div className=\"text-red-600 font-semibold\">Already booked</div>\n          ) : (\n            <form\n              className=\"mt-2 flex flex-col gap-2\"\n              onSubmit={async (e) => {\n                e.preventDefault();\n                const name = e.target.name.value;\n                try {\n                  await axios.post(`${API_URL}/booking`, {\n                    name,\n                    date: selectedDate,\n                  });\n                  alert(\"Booking confirmed!\");\n                  fetchBookings();\n                } catch (err) {\n                  alert(\"Failed to book.\");\n                }\n              }}\n            >\n              <input\n                name=\"name\"\n                required\n                placeholder=\"Your Name\"\n                className=\"border rounded px-2 py-1\"\n              />\n              <button\n                type=\"submit\"\n                className=\"bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700\"\n              >\n                Book Date\n              </button>\n            </form>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Calendar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}